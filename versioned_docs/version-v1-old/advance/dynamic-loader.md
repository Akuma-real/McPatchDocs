---
sidebar_position: 4
---

# 热升级

McPatch客户端会不定期发布新的版本。但升级客户端不像升级管理端那样方便，因为客户端在玩家电脑上，升级需要重新发包，比较麻烦

热升级就是用来解决这个问题的，通过使用动态加载器启动McPatch客户端后，McPatch客户端就可以间接地自己更新自己的版本了

说明：热升级新版本之后，需要第二次启动的时候新版本才会生效，这是一个很小的细节，但是必须要提一下

### 兼容性

动态加载器目前支持全平台的所有Minecraft版本，但最低需要Java 8才能运行

动态加载器目前支持McPatch客户端全版本

注意McPatch客户端跨大版本升级（1.0升级到1.1）是不支持的，会出现`version.txt`文件一直404的情况！原因是新版修改了版本号文件的文件名

### 1.客户端首次配置

动态加载器需要提前配置在客户端，并且这个文件是永远不需要更新的（除非遇到严重bug），只更新客户端本体就好

1. 下载动态加载器DynamicLoader（版本选择最新版即可）
2. 把动态加载器文件复制到目前正在使用的McPatch客户端旁边（一定要挨着放，不然会报错）
3. 双击运行动态加载器，然后会提示什么什么文件为空，无法启动之类的，先不管它，直接叉掉
4. 打开`mc-patch-dynamic-loader.txt`文件（这个文件就是动态加载器的配置文件）
5. 将目前正在使用McPatch客户端的实际文件名（包括后缀名）写入进去，然后保存关闭
6. 再次运行动态加载器，发现可以启动McPatch客户端了
8. 打开Minecraft启动器，修改原先的Java虚拟机参数。将原先McPatch客户端的文件名换成动态加载器的文件名（仅替换文件名，其它不动）
9. 比如原来是`-javaagent:McPatchClient-11.45.14.jar `，改过之后就是`-javaagent:DynamicLoader-1.0.0.jar `（最后面的空格不要漏掉，此段代码请勿复制，如果复制必定启动失败）
10. 回到启动器主页，启动Minecraft，如果McPatch客户端运行起来了，说明配置无误，可以继续进行后面的步骤

### 2.管理端这边的操作

1. 第一步是手工下载好新版本的McPatch客户端文件
2. 将动态加载器的配置文件`mc-patch-dynamic-loader.txt`文件从客户端那边复制到工作空间目录里，以加入更新
3. 动态加载器的配置文件位置需要放到：能通过更新去覆盖掉客户端对应的文件的位置上就可以，因为每个人位置都不一样，所以没有一个固定的文件位置
4. 如果你之前做过第2，3步骤，那么后续的更新就可以跳这两个步骤
5. 将新版的McPatch客户端本体文件也放入工作空间目录，位置在动态加载器的配置文件的旁边紧挨着
6. 打开动态加载器的配置文件，先清空原有内容，然后将新版的McPatch客户端文件名粘贴进去保存关闭。这样动态加载器就会加载新版本的客户端文件了
7. 创建一个新的版本，包含这两个文件，然后分发给玩家即可

### 一些小提示

做远程热升级的时候，务必保证动态加载器的配置文件的内容填写正确，因为填写错误会导致客户端启动失败，游戏也无法启动。解决办法是只能手动给玩家发一份【动态加载器的配置文件】和【客户端本体】替换掉游戏才可以恢复正常

